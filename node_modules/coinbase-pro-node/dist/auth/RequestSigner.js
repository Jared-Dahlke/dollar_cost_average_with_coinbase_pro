"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RequestSigner = void 0;
const crypto_1 = __importDefault(require("crypto"));
const buffer_1 = require("buffer/");
class RequestSigner {
    // https://docs.pro.coinbase.com/#creating-a-request
    static signRequest(auth, setup, clockSkew) {
        const timestamp = Date.now() / 1000 + clockSkew;
        const what = `${timestamp}${setup.httpMethod}${setup.requestPath}${setup.payload}`;
        const key = buffer_1.Buffer.from(auth.apiSecret, 'base64');
        const hmac = crypto_1.default.createHmac('sha256', key);
        const signature = hmac.update(what).digest('base64');
        return {
            key: auth.apiKey,
            passphrase: auth.passphrase,
            signature,
            timestamp,
        };
    }
}
exports.RequestSigner = RequestSigner;
//# sourceMappingURL=RequestSigner.js.map